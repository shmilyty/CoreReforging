# 钢之魂 Ver 0.4 - 冒险系统说明

## ⚔️ 冒险系统概述

冒险系统是游戏的核心玩法，玩家可以装备武器和装甲，挑战随机敌人，获得经验值，并在篝火处休息和升级装备。

## 🎮 基本流程

```
开始冒险 → 战斗 → 战斗 → 战斗 → 篝火 → 战斗 → ... → 结束冒险
```

### 冒险循环
1. **随机遭遇敌人**
2. **回合制战斗**
3. **战斗胜利** → 获得 EXP
4. **修复服务**（可选）
5. **每3场战斗** → 到达篝火
6. **篝火选项**：继续冒险 或 返回基地

## ⚔️ 战斗系统

### 回合制战斗
- **玩家回合**：所有装备的武器依次攻击
- **敌人回合**：敌人进行一次攻击
- **胜利条件**：敌人 HP ≤ 0
- **失败条件**：玩家 HP ≤ 0

### 战斗机制

#### 玩家攻击
```
伤害 = 武器攻击力
如果触发暴击（概率 = 武器暴击率）：
    伤害 × 2
```

#### 敌人攻击
```
如果触发闪避（概率 = 装甲闪避率）：
    伤害 = 0
否则：
    伤害 = 敌人攻击力
```

#### 战斗示例
```
=== 战斗中 ===
玩家 HP: 400/400
废铁守卫 HP: 200
===================

【玩家回合】
  使用 制式步枪 造成 75 点伤害！
  【暴击！】伤害翻倍！
  使用 等离子光剑 造成 240 点伤害！

敌人被击败！

战斗胜利！获得 50 EXP！
当前 HP: 400/400
```

## 🔥 篝火系统

### 触发条件
- 每击败 **3个敌人** 到达一处篝火

### 篝火功能
1. **免费恢复** - 生命值完全恢复
2. **装备管理** - 更换武器和装甲
3. **装备升级** - 使用 EXP 升级装备
4. **继续冒险** - 继续挑战（难度提升）
5. **返回基地** - 结束本次冒险

### 篝火界面
```
🔥 ==================== 🔥
     到达篝火休息点
🔥 ==================== 🔥

生命值已完全恢复！

当前状态：
  HP: 400/400
  EXP: 250
  已击败: 3 个敌人
  难度等级: 1 (敌人属性 +5%)

篝火选项：
[1] 装备管理
[2] 装备升级
[3] 继续冒险
[4] 传送回基地（结束冒险）
```

## 📈 难度递增机制

### 难度计算
```
难度等级 = 经过的篝火数量
```

### 敌人属性增强
每经过一处篝火：
- **攻击力** +5%
- **血量** +5%
- **EXP掉落** +10%

### 难度示例

| 篝火数 | 难度等级 | 敌人属性 | EXP掉落 |
|--------|----------|----------|---------|
| 0 | Lv.0 | 100% | 100% |
| 1 | Lv.1 | 105% | 110% |
| 2 | Lv.2 | 110% | 120% |
| 3 | Lv.3 | 115% | 130% |
| 4 | Lv.4 | 120% | 140% |

### 计算公式
```
敌人血量 = 基础血量 × (1 + 难度等级 × 0.05)
敌人攻击 = 基础攻击 × (1 + 难度等级 × 0.05)
EXP掉落 = 基础EXP × (1 + 难度等级 × 0.1)
```

## 🔧 修复服务

### 触发时机
- 每次战斗胜利后
- 如果玩家 HP < 最大HP

### 修复费用
```
修复费用 = 需要恢复的 HP 数量
1 HP = 1 EXP
```

### 修复选项
1. **完全修复** - 恢复到满HP
2. **部分修复** - 自定义恢复数量
3. **取消** - 不修复

### 修复示例
```
=== 修复服务 ===
当前 HP: 250/400
需要修复: 150 HP
修复费用: 150 EXP (1 HP = 1 EXP)
当前 EXP: 300

是否使用修复服务？
[1] 完全修复
[2] 部分修复
[3] 取消
```

## 📊 冒险统计

### 统计内容
1. **战斗统计**
   - 击败敌人数量
   - 到达篝火数量
   - 最终难度等级

2. **经验统计**
   - 获得 EXP
   - 消耗 EXP（修复服务）
   - 净收益

3. **武器伤害统计**
   - 每把武器造成的总伤害
   - 每把武器的攻击次数

### 统计报告示例
```
╔════════════════════════════════════╗
║       冒险统计报告                 ║
╚════════════════════════════════════╝

【战斗统计】
  击败敌人: 6 个
  到达篝火: 2 处
  最终难度: Lv.2

【经验统计】
  获得 EXP: +660
  消耗 EXP: -150
  净收益: 510

【武器伤害统计】
  制式步枪: 450 伤害 (6 次攻击)
  等离子光剑: 720 伤害 (6 次攻击)
```

## 🎯 冒险策略

### 装备准备
1. **必须装备装甲** - 提供生命值和闪避
2. **至少装备1把武器** - 否则无法造成伤害
3. **注意承重** - 超重会失去闪避率

### 战斗策略
1. **多武器流** - 装备多把武器增加输出
2. **高暴击流** - 使用高暴击率武器
3. **闪避流** - 保持承重<60%，利用闪避

### EXP管理
1. **保留修复EXP** - 预留足够的EXP用于修复
2. **篝火升级** - 在篝火处升级装备
3. **风险收益** - 高难度=高EXP，但更危险

### 进度选择
1. **稳健型** - 每个篝火都返回基地
2. **激进型** - 持续推进，追求高难度高收益
3. **平衡型** - 根据HP和EXP情况决定

## ⚠️ 注意事项

### 战斗前检查
- ✅ 已装备装甲
- ✅ 已装备武器
- ✅ 武器总重量 ≤ 装甲承重
- ✅ 武器总重量 ≤ 承重60%（保持闪避）

### 冒险中注意
- 💚 HP过低时及时修复
- 💰 保留足够EXP用于修复
- 🔥 利用篝火免费恢复
- 📈 评估难度，适时返回

### 失败后果
- ❌ 失去所有未保存的进度
- ❌ 获得的EXP会被扣除消耗的部分
- ❌ 武器伤害统计会保留

## 🎮 操作指南

### 开始冒险
1. 主菜单选择 `[4] 出发冒险`
2. 确认装备状态
3. 开始第一场战斗

### 战斗中
- 自动进行，无需操作
- 观察战斗过程
- 等待战斗结果

### 战斗后
1. 选择是否修复
2. 继续下一场战斗
3. 或到达篝火

### 篝火处
1. 选择装备管理/升级
2. 或选择继续/返回
3. 继续会提升难度

### 冒险结束
1. 查看统计报告
2. 获得净收益EXP
3. 返回主菜单

## 📝 版本更新

### Ver 0.4 新增
- ✅ 完整的冒险系统
- ✅ 回合制战斗
- ✅ 篝火休息点
- ✅ 难度递增机制
- ✅ 修复服务
- ✅ 冒险统计报告
- ✅ 武器伤害追踪

### 待优化
- ⏳ 篝火处的装备管理功能
- ⏳ 篝火处的装备升级功能
- ⏳ 更多敌人种类
- ⏳ Boss战
- ⏳ 特殊事件

